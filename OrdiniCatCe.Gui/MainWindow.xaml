<Window x:Class="OrdiniCatCe.Gui.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:OrdiniCatCe.Gui.Converters"
        DataContext="{Binding Main, Source={StaticResource Locator}}"
        Title="MainWindow" Height="300" Width="800" >
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.Resources>
            <converters:BackgroundConverter x:Key="backgroundConverter" />
        </Grid.Resources>
        <TextBlock Text="Gestione Ordini" HorizontalAlignment="Center" FontSize="24"  Padding="0,5,0,8"></TextBlock>
        <StackPanel x:Name="FiltersPanel" Orientation="Horizontal" Grid.Row="1">
            <TextBlock Text="Nome" Margin="2"></TextBlock>
            <TextBox Text="{Binding NameFilter, UpdateSourceTrigger=PropertyChanged}" Width="100"></TextBox>
            <Button Margin="2"  Command="{Binding ClearNomeFilterCommand}" >
                <Image Source="Images/eraser2.png" Width="16" Height="16"  />
            </Button>
            <TextBlock Margin="10,2,2,2" Text="Cognome"></TextBlock>
            <TextBox Text="{Binding CognomeFilter, UpdateSourceTrigger=PropertyChanged}" Width="100"></TextBox>
            <Button Margin="2"  Command="{Binding ClearCognomeFilterCommand}" >
                <Image Source="Images/eraser2.png" Width="16" Height="16"  />
            </Button>
            <Button Margin="20,2"  Command="{Binding ClearFiltersCommand}" >
                <Image Source="Images/eraser2.png" Width="16" Height="16"  />
            </Button>
            
            <TextBlock Text="Visualizza Ritirati"></TextBlock>
            <CheckBox IsChecked="{Binding ViewRitirati}"></CheckBox>
        </StackPanel>
        <DataGrid x:Name="grid" CanUserAddRows="false" CanUserDeleteRows="False" AutoGenerateColumns="False"
                  ItemsSource="{Binding RigheOrdine}" Grid.Row="2"
                  >
            <DataGrid.RowStyle>
                <Style TargetType="DataGridRow">
                    <Setter Property="Background" Value="{Binding RelativeSource={RelativeSource Self},
                Path=Item, Converter={StaticResource backgroundConverter}}"/>
                </Style>
            </DataGrid.RowStyle>
            <DataGrid.Columns>
                <DataGridTextColumn Header="Nome"  Binding="{Binding Nome}" IsReadOnly="True"/>
                <DataGridTextColumn Header="Cognome"  Binding="{Binding Cognome}" IsReadOnly="True"/>
                <DataGridTextColumn Header="Indirizzo" Binding="{Binding Indirizzo}" IsReadOnly="True" />
                <DataGridTextColumn Header="Marca" Binding="{Binding Marche.Nome}" IsReadOnly="True" />
                <DataGridTextColumn Header="Descrizione" Binding="{Binding Descrizione}" IsReadOnly="True" />
                <DataGridTextColumn Header="Telefono" Binding="{Binding Telefono}" IsReadOnly="True" />
                <DataGridTextColumn Header="Modalita" Binding="{Binding ModalitàAvviso}" IsReadOnly="True" />
                <DataGridTextColumn Header="Fornitore" Binding="{Binding Fornitori.Name}"  IsReadOnly="True" />
                <DataGridCheckBoxColumn Header="Avvisato" Binding="{Binding Avvisato}" />
                <DataGridCheckBoxColumn Header="Ritirato" Binding="{Binding Ritirato}" />

                <DataGridTemplateColumn>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Click="SetAvvisato_OnClick">Avvisato</Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>


                <DataGridTemplateColumn>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Click="SetRitirato_OnClick">Ritirato</Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Click="Aggiorna_OnClick">Aggiorna</Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Margin="5" Orientation="Horizontal" Grid.Row="3">
            <Button Command="{Binding AddOrdineCommand}" Content="Nuovo Ordine" />
            <Button Command="{Binding AddMarcaCommand}" Content="Aggiungi Marca" />
            <Button Command="{Binding AddFornitoreCommand}" Content="Aggiungi Fornitore" />
        </StackPanel>
    </Grid>
</Window>
